---
title: 常用函数实现
date: 2016-4-11 20:23:04
tags:
---

## new
```js
function new(con, ...args) {
  let obj = Object.create({})
  obj.__proto__ = con.prototype
  let res = con.apply(obj, args)
  return typeof res === 'object' ? res : obj
}
```

## instanceof
```js
function instanceof(a, b) {
  while(a.__proto__) {
    if (a.__proto__ === b.prototype) {
      return true
    }
    a = a.__proto__
  }
  return false
}
```

## 防抖
```js
function debounce(fn, wait) {
  let timer = null
  return function(...args) {
    if (timer) {
      clearTimeout(timer)
    }
    timer = setTimeout(() => {
      fn.apply(this, args)
    }, wait)
  }
}
```

## 节流
```js
function throttle(fn, wait) {

}
```

## call

## apply

## bind

## 深拷贝
```js
// 递归
function deepClone(obj) {
  if(!obj || typeof obj != 'object') return obj
  if(obj instanceof RegExp) return new RegExp(obj)
  var cloneObj = new obj.constructor
  for(let key in obj) {
    if (obj.hasOwnProperty(key)) {
      cloneObj[key] = deepClone(obj[key])
    }
  }
  return cloneObj
}
```